<section class="app-charts__col-1">
  <mat-card>
    <mat-card-title>
      <span [innerHTML]="formula"></span>
    </mat-card-title>
  </mat-card>

  <div #stickyContainer
       class="app-charts__canvas-container">
    <mat-card>
      <canvas appChartsBackground
              class="app-charts__background-canvas"
              [width]="canvasSize"
              [height]="canvasSize"></canvas>
      <canvas #canvas
              class="app-charts__canvas"
              [width]="canvasSize"
              [height]="canvasSize"></canvas>
    </mat-card>
  </div>
</section>

<section class="app-charts__col-2">
  <mat-card>
    <mat-card-subtitle>
      Уравнение в общем виде
    </mat-card-subtitle>
    <mat-card-title>
      <mat-form-field class="app-charts__select">
        <mat-select class="app-charts__select"
                    tabindex="1"
                    [(value)]="functionType"
                    (change)="drawFunction()">
          <mat-option value="linear">y = kx + b</mat-option>
          <mat-option value="parabole">y = ax&#178; + bx + c</mat-option>
          <mat-option value="hyperbole">y = k/x</mat-option>
        </mat-select>
      </mat-form-field>
    </mat-card-title>
  </mat-card>

  <ng-container *ngIf="functionType === 'linear'">
    <app-param paramName="k"
               subtitle="Коэффициент наклона"
               iconLeft="rotate-left"
               iconRight="rotate-right"
               [(param)]="power1"
               (paramChange)="drawFunction()"></app-param>
    <div class="space"></div>
    <app-param paramName="b"
               subtitle="Вертикальное cмещение"
               iconLeft="up"
               iconRight="down"
               [(param)]="power0"
               (paramChange)="drawFunction()"></app-param>
  </ng-container>

  <ng-container *ngIf="functionType === 'parabole'">
    <app-param paramName="a"
               subtitle="Коэффициент вогнутости/выпуклости"
               iconLeft="more-vert"
               iconRight="more-vert"
               [(param)]="power2"
               (paramChange)="drawFunction()"></app-param>
    <div class="space"></div>
    <app-param paramName="b"
               subtitle="Горизонтальное смещение (влияет и на вертикальное)"
               iconLeft="more-horiz"
               iconRight="more-horiz"
               [(param)]="power1"
               (paramChange)="drawFunction()"></app-param>
    <div class="space"></div>
    <app-param paramName="c"
               subtitle="Вертикальное смещение"
               iconLeft="up"
               iconRight="down"
               [(param)]="power0"
               (paramChange)="drawFunction()"></app-param>
  </ng-container>

  <ng-container *ngIf="functionType === 'hyperbole'">
    <app-param paramName="k"
               subtitle="Коэффициент"
               iconLeft="more-horiz"
               iconRight="more-horiz"
               [(param)]="power_1"
               (paramChange)="drawFunction()"></app-param>
  </ng-container>

  <mat-card *ngIf="!paramsStore.test; else stopwatch">
    <mat-card-title> Тест </mat-card-title>
    <mat-card-content>
      Узнай наколько хорошо ты усвоил материал
      <br><strong>Построй предложенную функцию как можно быстрей!</strong>
      <br><i>Попробуй ввести значения сразу, за использование клавиш добавляются секунды</i>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button
              class="app-charts__btn-random-func"
              color="warn"
              (click)="setRandomParams()">Случайная функция</button>
    </mat-card-actions>
  </mat-card>
  <ng-template #stopwatch>
    <mat-card>
      <mat-card-subtitle> Секундомер: </mat-card-subtitle>
      <mat-card-title> {{timerValue}} c </mat-card-title>
    </mat-card>
  </ng-template>
</section>

<mat-card *ngIf="resultMessage">
  <mat-card-title>{{resultMessage}}</mat-card-title>
  <mat-card-content>
    <strong>Время:</strong> {{timerValue}} с
  </mat-card-content>
</mat-card>